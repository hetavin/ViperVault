<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <title>ViperVault - Save Unlimited Photos & Videos</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="index.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>

<body>

  <header class="header">
    <h2>ViperVault</h2>
    <nav>
      <a href="#">Home</a>
      <a href="#features">Features</a>
      <a href="#how">How It Works</a>
      <a href="#testimonials">Testimonials</a>
      <a href="http://localhost:3000/login.html" class="login">Login</a>
      <a class="mobile-modes"><i id="theme-icon" class="fas fa-moon"></i></a>

    </nav>

    <div class="menu-icon">
      <i class="fas fa-bars"></i>
    </div>

    <div class="mobile-menu">
      <div class="nav-links">
        <a href="#">Home</a>
        <a href="#features">Features</a>
        <a href="#how">How It Works</a>
        <a href="#testimonials">Testimonials</a>
        <a href="/login.html" class="login">Login</a>
        <a class="mobile-modes"><i class="fas fa-moon"></i></a>

      
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="overlay">
      <h1>Welcome to ViperVault</h1>
      <!-- <h1>Save Unlimited Photos & Videos</h1> -->
      <p>ViperVault is your ultimate solution for storing and managing your photos and videos.</p>
    </div>
  </section>

  <section class="crt_folder" id="folder-section">
    <div class="fol_lable">
      <a data-bs-toggle="modal" data-bs-target="#addFolderModal">
        <div class="newfolder">
          <div class="crt_btn">
            <i class="fa-solid fa-plus"></i>
          </div>
        </div>
      </a>

      <div class="modal fade" id="addFolderModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="addFolderModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">New message</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="recipient-name" class="col-form-label">Folder Name:</label>
                <input type="text" class="form-control" id="folder-name">
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button onclick="addFolder()" class="btn btn-primary" id="saveBtn">Add Folder</button>
            </div>
          </div>
        </div>
      </div>


      <div class="lable">
        <p>Add Folder</p>
      </div>
    </div>

  </section>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

<script>

  $(document).ready(function () {


    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (currentUser) {
      JSON.parse(localStorage.getItem('users'))?.map((user) => {
        if (user.email === currentUser.email) {
          user.folders?.forEach(element => {
            $("#folder-section").append(`<div class="fol_lable">
        <div class="newfolder">
          <div class="crt_btn">
            <i class="fa-solid fa-folder"></i>
          </div>
        </div>

        <div class="lable">
          <p>${element}</p>
        </div>
      </div>`);
          });
        }
      });
    } else {
      window.location.href = '/login.html';

    }
    // on save button click
    $("#saveBtn").click(function () {
      let value = $("#folder-name").val();   // get input value
      console.log("Folder name:", value);

      // do something with value (append div, etc.)
      $("#folder-section").append(`<div class="fol_lable">
        <div class="newfolder">
          <div class="crt_btn">
            <i class="fa-solid fa-folder"></i>
          </div>
        </div>

        <div class="lable">
          <p>${value}</p>
        </div>
      </div>`);
      const currentUser = JSON.parse(localStorage.getItem('currentUser'));
      let users = JSON.parse(localStorage.getItem('users')).map((user) => {
        if (user.email === currentUser.email) {
          let folders = user.folders || [];
          folders.push(value);
          return {
            ...user,
            folders
          }
        } else {
          return user
        }
      });

      localStorage.setItem('users', JSON.stringify(users));



      // close modal manually
      let modal = bootstrap.Modal.getInstance(document.getElementById("addFolderModal"));
      modal.hide();
    });
  });
</script>

</html>